!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("electron"),require("os"),require("path"),require("http"),require("fs")):"function"==typeof define&&define.amd?define(["electron","os","path","http","fs"],n):"object"==typeof exports?exports.MainLib=n(require("electron"),require("os"),require("path"),require("http"),require("fs")):e.MainLib=n(e.electron,e.os,e.path,e.http,e.fs)}(this,function(e,n,o,t,r){return function(e){function n(t){if(o[t])return o[t].exports;var r=o[t]={exports:{},id:t,loaded:!1};return e[t].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}var o={};return n.m=e,n.c=o,n.p="",n(0)}([function(e,n,o){"use strict";function t(){try{b&&b.show()}catch(e){b=null}if(!b){var e=void 0,n=null;n||(n={windowPos:{width:1080,height:720}}),e=new f({width:n.windowPos.width,height:n.windowPos.height,minWidth:960,minHeight:600}),e.downloads={};var o="file://"+w.join(__dirname,"..","pages")+"/index.html";return o+="?project="+encodeURIComponent(Editor.projectInfo.path),e.loadURL(o),s({event:"session_start"}),p.on("open-file-dialog",function(e){var n=h.showOpenDialog({properties:["openDirectory"]});e.sender.send("selected-directory",n)}),p.on("download-file",function(n,o){return null==e?void console.log("Win is null"):void e.webContents.downloadURL(o)}),p.on("cancel-download-file",function(n,o){var t=e.downloads[o];return t?(t.cancel(),void delete e.downloads[o]):void console.log("failed, can not find download item by url")}),e.on("close",function(){b=null,s({event:"session_end"})}),e.on("closed",function(){e=null}),e.webContents.session.on("will-download",function(e,n,o){var t=b,r=n.getURL(),i=r.split("/"),s=w.join(v.homedir(),".sdkbox","temp",i[i.length-1]);n.setSavePath(s),t.downloads[r]=n,n.on("updated",function(e,o){var i={state:o,url:r};"interrupted"===o&&delete t.downloads[r],"progressing"===o&&(i.downloadRatio=100*n.getReceivedBytes()/n.getTotalBytes()),t.webContents.send("download-status",i)}),n.once("done",function(e,n){t&&(delete t.downloads[r],t.webContents.send("download-finish",{state:n,url:r}))})}),b=e,e}}function r(e,n){null!=b&&null!=b.webContents&&b.webContents.send(e,n)}function i(e,n){y.get(e,function(e){})}function s(e){e.chanel="creator",e.userName=Editor.lastLogin,e.creatorVersion=Editor.App.version,e.version=u.Config.version,e.beta=u.Config.beta;var n="http://metrics.sdkbox.com/?"+JSON.stringify(e);i(n)}function a(){s({event:"creator_sdkbox_load"}),l.on("will-quit",function(){s({event:"creator_quit"})})}function c(){s({event:"creator_sdkbox_unload"})}var u=o(1),d=o(2),l=d.app,f=d.BrowserWindow,p=d.ipcMain,h=d.dialog,v=o(3),w=o(4),y=o(5),b=(o(6),void 0);n.LaunchWindow=t,n.SendMsgToSDKBoxWin=r,n.sdkboxLoad=a,n.sdkboxUnload=c},function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o={version:"0.0.1",beta:!0};n.Config=o},function(e,n){e.exports=require("electron")},function(e,n){e.exports=require("os")},function(e,n){e.exports=require("path")},function(e,n){e.exports=require("http")},function(e,n,o){"use strict";function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,n){for(var o=0;o<n.length;o++){var t=n[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(n,o,t){return o&&e(n.prototype,o),t&&e(n,t),n}}(),i=o(3),s=o(7),a=o(4),c=o(8),u=void 0;e.exports=function(){function e(){t(this,e);var n=i.homedir();this._path=a.join(n,".sdkbox","conf","gui.json")}return r(e,null,[{key:"getInstance",value:function(){return u||(u=new e),u}}]),r(e,[{key:"load",value:function(){try{var e=s.readFileSync(this._path),n=JSON.parse(e);return n}catch(e){return console.log(e.toString()),null}}},{key:"save",value:function(e){var n=JSON.stringify(e),o=a.dirname(this._path),t=null;try{t=s.statSync(o)}catch(e){t=null}t&&!t.isDirectory()||c.sync(a.dirname(this._path)),s.writeFileSync(this._path,n)}}]),e}()},function(e,n){e.exports=require("fs")},function(e,n,o){function t(e,n,o,a){"function"==typeof n?(o=n,n={}):n&&"object"==typeof n||(n={mode:n});var c=n.mode,u=n.fs||i;void 0===c&&(c=s&~process.umask()),a||(a=null);var d=o||function(){};e=r.resolve(e),u.mkdir(e,c,function(o){if(!o)return a=a||e,d(null,a);switch(o.code){case"ENOENT":t(r.dirname(e),n,function(o,r){o?d(o,r):t(e,n,d,r)});break;default:u.stat(e,function(e,n){e||!n.isDirectory()?d(o,a):d(null,a)})}})}var r=o(4),i=o(7),s=parseInt("0777",8);e.exports=t.mkdirp=t.mkdirP=t,t.sync=function e(n,o,t){o&&"object"==typeof o||(o={mode:o});var a=o.mode,c=o.fs||i;void 0===a&&(a=s&~process.umask()),t||(t=null),n=r.resolve(n);try{c.mkdirSync(n,a),t=t||n}catch(i){switch(i.code){case"ENOENT":t=e(r.dirname(n),o,t),e(n,o,t);break;default:var u;try{u=c.statSync(n)}catch(e){throw i}if(!u.isDirectory())throw i}}return t}}])});